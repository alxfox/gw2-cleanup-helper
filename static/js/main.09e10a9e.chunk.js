(this.webpackJsonpgwinv=this.webpackJsonpgwinv||[]).push([[0],{17:function(e,n,t){},18:function(e,n,t){},2:function(e){e.exports=JSON.parse('{"INSCRIPTIONS":{"Shaman":46684,"Cavalier":46685,"Rabid":46686,"Magi":46687,"Soldier":46688,"Dire":46690},"INSIGNIAS":{"Shaman":46708,"Cavalier":46709,"Rabid":46710,"Magi":46711,"Soldier":46712,"Dire":49522},"STAT_SETS":{"153":"Shaman","154":"Rabid","156":"Magi","162":"Soldier","616":"Cavalier","754":"Dire"},"RARITY_COLORS":{"Basic":"#000000","Fine":"#62A4DA","Masterwork":"#1a9306","Rare":"#fcd00b","Exotic":"#ffa405","Ascended":"#fb3e8d","Legendary":"#4C139D","Default":"#000000"}}')},21:function(e,n,t){},22:function(e,n,t){"use strict";t.r(n);var r=t(1),i=t.n(r),c=t(11),a=t.n(c),s=(t(17),t(4)),u=(t.p,t(18),t(10)),o=t(2),l=t(0),d=function(e,n,t,r){var i=r?n*t:n;return Object(l.jsxs)("div",{children:[" ",e,": ",Object(l.jsx)("span",{style:{color:"yellow"},children:Math.floor(i/1e4)})," ",Object(l.jsx)("span",{style:{color:"silver"},children:Math.floor(i%1e4/100)})," ",Object(l.jsx)("span",{style:{color:"orange"},children:i%100})]})},p=function(e){var n=e.icon,t=(e.id,e.level),r=e.name,c=e.rarity,a=e.type,s=e.vendor_value,u=(e.subtype,e.stats,e.count),p=e.buy,f=e.sell,h=e.flags,b=e.insBuy,j=e.insSell,v=e.upgrades,g=!1;return Object(l.jsxs)("div",{className:"tooltip",children:[Object(l.jsxs)("span",{className:"tooltiptext",children:[Object(l.jsxs)("h4",{children:[u>1?u:null," ",r]}),Object(l.jsxs)("div",{children:["Level: ",t]}),Object(l.jsxs)("div",{children:[s>0&&void 0===h.find((function(e){return"NoSell"!==e}))?d("Vendor",s):null,p>0?d("TP Buy",p,u,g):null,f>0?d("TP Sell",f,u,g):null,b>0?d("Ins Buy",b,u,g):null,j>0?d("Ins Sell",j,u,g):null,void 0!==v?v.map((function(e,n){return Object(l.jsxs)(i.a.Fragment,{children:[e.buy>0?d("Upgr Buy",e.buy,u,g):null,e.sell>0?d("Upgr Sell",e.sell,u,g):null]},n)})):null]}),Object(l.jsx)("div",{children:a})]}),Object(l.jsx)("img",{style:{border:"2px solid "+o.RARITY_COLORS[c]},className:"myimg",src:n,alt:"",width:"68",height:"68"})]})},f=function(e){var n=e.img;return Object(l.jsx)("div",{className:"tooltip",children:Object(l.jsx)("img",{style:{border:"2px solid #000000"},src:n,alt:"",width:"68",height:"68"})})},h=t(12),b=t(3),j=t.n(b),v=t(6);function g(e,n){for(var t=[],r=0;r<e.length;r+=n){var i=e.slice(r,r+n);t.push(i)}return t}function O(){return(O=Object(v.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m(n,"commerce/prices"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(v.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m(n,"items"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,n){return x.apply(this,arguments)}function x(){return(x=Object(v.a)(j.a.mark((function e(n,t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(Object(h.a)(new Set(n)),t);case 2:return r=(r=e.sent).flat(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,n){return A.apply(this,arguments)}function A(){return(A=Object(v.a)(j.a.mark((function e(n,t){var r,i,c,a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=g(n,200),i=[],c=0;case 3:if(!(c<r.length)){e.next=15;break}return console.log("i did a fetch from: "+t),e.next=7,fetch("https://api.guildwars2.com/v2/"+t+"?ids="+r[c]);case 7:return a=e.sent,e.next=10,a.json();case 10:s=e.sent,i.push(s);case 12:c++,e.next=3;break;case 15:return console.log("objects:",i),e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t(21);function C(e){return"Weapon"===e.type||"Back"===e.type||"Armor"===e.type}function w(e){if(C(e)&&"Exotic"===e.rarity){var n=o.STAT_SETS[e.details.infix_upgrade.id];if(void 0===n)return;if("Weapon"===e.type)return o.INSCRIPTIONS[n];if("Armor"===e.type)return o.INSIGNIAS[n]}}var I=function(e){var n=e.inventories,t=Object(r.useState)([]),i=Object(s.a)(t,2),c=i[0],a=i[1];return Object(r.useEffect)((function(){var e=[],t=[],r=n.map((function(n){return n.map((function(n){return n?(e.push({id:n.id,count:n.count,upgrades:n.upgrades}),void 0!==n.upgrades&&(t=t.concat(n.upgrades)),n.id):(e.push({id:"",count:0,upgrades:void 0}),"")}))})).flat();console.log("allIDs: "+r),function(e){return y.apply(this,arguments)}(r).then((function(n){n.forEach((function(e){var n=w(e);void 0!==n&&t.push(n),function(e){return!e.flags.includes("AccountBound")&&!e.flags.includes("SoulbindOnAcquire")}(e)&&t.push(e.id)})),function(e){return O.apply(this,arguments)}(t).then((function(t){console.log("prices",t);var r=e.map((function(e){var r=e.id,i=e.count,c=e.upgrades;if(""!==r){var a=n.find((function(e){return e.id===r})),s=t.find((function(e){return e.id===r}));void 0===s?(a.buy=0,a.sell=0):(a.buy=s.buys.unit_price,a.sell=s.sells.unit_price),a.upgrades=[],void 0!==c&&(a.upgrades=c.map((function(e){var n=t.find((function(n){return n.id===e}));return{id:e,buy:n.buys.unit_price,sell:n.sells.unit_price}}))),a.count=i;var u=w(a);if(void 0!==u){var o=t.find((function(e){return e.id===u}));void 0===o?(a.insBuy=0,a.insSell=0):(a.insBuy=o.buys.unit_price,a.insSell=o.sells.unit_price)}return a}}));console.log(r),a(r)}))}))}),[n]),Object(l.jsx)("div",{className:"inventory",children:c.map((function(e,n){return 201===n&&console.log(e),void 0===e?Object(l.jsx)(f,{img:"https://render.guildwars2.com/file/CC3A2CAADBB2F2B13B1E70079E7E207B08D16E93/65946.png"},n):Object(r.createElement)(p,Object(u.a)(Object(u.a)({},e),{},{key:n}))}))})},B=function(e){var n=e.char,t=Object(r.useState)([]),i=Object(s.a)(t,2),c=i[0],a=i[1],u="https://api.guildwars2.com/v2/characters/"+n+"/inventory?access_token="+Object(r.useContext)(E);return Object(r.useEffect)((function(){console.log(u),fetch(u).then((function(e){return e.json()})).then((function(e){console.log(e);var n=e.bags.map((function(e){return null===e?null:e.inventory}));console.log(n),a(n)}))}),[]),Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:n}),Object(l.jsx)(I,{inventories:c})]})},D=t(9),E=i.a.createContext("test");var N=function(){var e=Object(r.useState)(""+D.API_KEY),n=Object(s.a)(e,2),t=n[0],i=(n[1],Object(r.useState)([])),c=Object(s.a)(i,2),a=c[0],u=c[1];return Object(r.useEffect)((function(){fetch("https://api.guildwars2.com/v2/characters?access_token="+t).then((function(e){return e.json()})).then((function(e){e.map((function(e,n){return{name:e,id:n}}));u([{name:D.CHARACTER,id:0}])}))}),[t]),Object(l.jsx)(E.Provider,{value:t,children:a.map((function(e){return console.log(e[1]),Object(l.jsx)(B,{char:e.name},e.id)}))})},R=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,23)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),r(e),i(e),c(e),a(e)}))};a.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(N,{})}),document.getElementById("root")),R()},9:function(e){e.exports=JSON.parse('{"API_KEY":"3AA69BFA-8140-F14D-98A0-DC81ADDDF652F85ECF42-D5B5-4B2D-A6F8-83FA0935154D","CHARACTER":"Dycca"}')}},[[22,1,2]]]);
//# sourceMappingURL=main.09e10a9e.chunk.js.map